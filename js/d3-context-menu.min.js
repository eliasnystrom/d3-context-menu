!function(n,e){if("object"==typeof module&&module.exports){var t=require("d3");module.exports=e(t)}else if("function"==typeof define&&define.amd){try{t=require("d3")}catch(e){t=n.d3}t.contextMenu=e(t),define([],function(){return t.contextMenu})}else n.d3&&(n.d3.contextMenu=e(n.d3))}(this,function(f){var d={noop:function(){},isFn:function(e){return"function"==typeof e},const:function(e){return function(){return e}},toFactory:function(e,n){return e=void 0===e?n:e,d.isFn(e)?e:d.const(e)}},r=null,v=function(){r&&(f.select(".d3-context-menu").remove(),f.select("body").on("mousedown.d3-context-menu",null),r.boundCloseCallback(),r=null)};return function(t,e){if("close"===t)return v();t=d.toFactory(t);var o=(e=d.isFn(e)?{onOpen:e}:e||{}).onOpen||d.noop,c=e.onClose||d.noop,l=d.toFactory(e.position),i=d.toFactory(e.theme,"d3-context-menu-theme");return function(s,p){var e=this;if(v(),r={boundCloseCallback:c.bind(e,s,p)},f.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu "+i.bind(e)(s,p)),f.select("body").on("mousedown.d3-context-menu",v),f.selectAll(".d3-context-menu").on("contextmenu",function(){v(),f.event.preventDefault(),f.event.stopPropagation()}).append("ul").call(function r(e,u){arguments.length<3&&(depth=0);var a=function(e){return d.toFactory(e).call(u,s,p)};e.selectAll("li").data(function(e){var n=0===depth?t:e.children;return a(n)}).enter().append("li").each(function(e){var n=!!a(e.divider),t=!!a(e.disabled),o=!!a(e.children),c=!!e.action,l=n?"<hr>":a(e.title),i=f.select(this).classed("is-divider",n).classed("is-disabled",t).classed("is-header",!o&&!c).classed("is-parent",o).html(l).on("click",function(){!t&&c&&(e.action.call(u,s,p),v())});if(o){var d=i.append("ul").classed("is-children",!0);r(d,u,++depth)}})},e),!1!==o.bind(e)(s,p)){var n=l.bind(e)(s,p);f.select(".d3-context-menu").style("left",(n?n.left:f.event.pageX-2)+"px").style("top",(n?n.top:f.event.pageY-2)+"px").style("display","block"),f.event.preventDefault(),f.event.stopPropagation()}}}});