!function(n,e){if("object"==typeof module&&module.exports){var t=require("d3");module.exports=e(t)}else if("function"==typeof define&&define.amd){try{t=require("d3")}catch(e){t=n.d3}t.contextMenu=e(t),define([],function(){return t.contextMenu})}else n.d3&&(n.d3.contextMenu=e(n.d3))}(this,function(v){var d={noop:function(){},isFn:function(e){return"function"==typeof e},const:function(e){return function(){return e}},toFactory:function(e,n){return e=void 0===e?n:e,d.isFn(e)?e:d.const(e)}},r=null,m=function(){r&&(v.select(".d3-context-menu").remove(),v.select("body").on("mousedown.d3-context-menu",null),r.boundCloseCallback(),r=null)};return function(t,e){if("close"===t)return m();t=d.toFactory(t);var o=(e=d.isFn(e)?{onOpen:e}:e||{}).onOpen||d.noop,c=e.onClose||d.noop,l=d.toFactory(e.position),i=d.toFactory(e.theme,"d3-context-menu-theme");return function(f,p){var e=this;if(m(),r={boundCloseCallback:c.bind(e,f,p)},v.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu "+i.bind(e)(f,p)),v.select("body").on("mousedown.d3-context-menu",m),v.selectAll(".d3-context-menu").on("contextmenu",function(){m(),v.event.preventDefault(),v.event.stopPropagation()}).append("ul").call(function r(e,u,a){arguments.length<3&&(a=0);var s=function(e){return d.toFactory(e).call(u,f,p)};e.selectAll("li").data(function(e){var n=0===a?t:e.children;return s(n)}).enter().append("li").each(function(e){var n=!!s(e.divider),t=!!s(e.disabled),o=!!s(e.children),c=!!e.action,l=n?"<hr>":s(e.title),i=v.select(this).classed("is-divider",n).classed("is-disabled",t).classed("is-header",!o&&!c).classed("is-parent",o).html(l).on("click",function(){!t&&c&&(e.action.call(u,f,p),m())});if(o){var d=i.append("ul").classed("is-children",!0);r(d,u,++a)}})},e),!1!==o.bind(e)(f,p)){var n=l.bind(e)(f,p);v.select(".d3-context-menu").style("left",(n?n.left:v.event.pageX-2)+"px").style("top",(n?n.top:v.event.pageY-2)+"px").style("display","block"),v.event.preventDefault(),v.event.stopPropagation()}}}});